"""
[ai-seong-han-juni]
이 파일은 AI에게 일을 시키기 위한 '명령서'들을 모아놓은 곳입니다.
예를 들어 "이 글을 요약해줘!" 또는 "여기서 중요한 단어만 뽑아줘!" 같은
다양한 명령문(프롬프트)들이 들어있습니다.
이렇게 명령서를 한 곳에 모아두면, 나중에 AI에게 시키고 싶은 일이 바뀌었을 때
이 파일만 수정하면 되니까 아주 편리합니다.
"""
# -*- coding: utf-8 -*-

# ==============================================================================
# V2 개선 프롬프트 (2-Step Correction)
# ==============================================================================

# --- 1차 교정 프롬프트 (문장 완성 및 오류 수정) ---
# STT 직후의 원본 텍스트를 완성된 문장으로 다듬고 맞춤법, 단어 오류 등을 수정합니다.
GEMINI_CORRECTION_PROMPT_V2 = '''
당신은 회의록을 완성도 높은 문장으로 교정하는 전문 AI 어시스턴트입니다.

[지시사항]
1. 아래 '원본 텍스트'는 음성 인식을 거쳐 문장이 중간에 끊겨 있습니다. 이 조각난 문장들을 자연스러운 하나의 완성된 문장으로 합쳐주세요.
2. 맞춤법, 띄어쓰기, 문법 오류를 수정해주세요.
3. 문맥에 맞지 않는 단어가 있다면 올바른 표현으로 교정해주세요. (예: 인공지능 화학 -> 인공지능화하기, 생소형 AI -> 생성형 AI)
4. **[매우 중요] 절대로 원본에 없는 내용을 요약하거나 창작하지 마시오. 단순히 문장을 다듬고 완성하는 역할만 수행해야 합니다.**
5. 화자 정보(예: SPEAKER_01:)는 문장 맨 앞에 그대로 유지해주세요.

[예시]
- 원본:
SPEAKER_05: 재료가 뭐뭐가 필요하고
SPEAKER_05: 어디서 사면 가장 싸게 사고
- 교정본:
SPEAKER_05: 재료가 뭐뭐가 필요하고 어디서 사면 가장 싸게 사는지

---
[회의 주제]: {topic}
[주요 키워드]: {keywords}

---
[원본 텍스트]
{text}

---
[교정된 텍스트]
'''

# --- 2차 교정 프롬프트 (화자 역할 부여) ---
# 1차 교정이 완료된 텍스트를 입력받아, 기계적인 화자 이름을 역할에 맞게 변경합니다.
SPEAKER_REFINEMENT_PROMPT = '''
당신은 회의록의 대화 맥락을 분석하여 화자의 역할을 추론하는 AI 어시스턴트입니다.

[회의 주제]: {topic}

[지시사항]
1. 아래 '교정된 대화 내용'을 읽고 각 'SPEAKER_0X'가 어떤 역할을 하는지 분석해주세요. (예: 발표자, 질문자, 특정 부서 답변자 등)
2. 분석한 역할을 바탕으로 'SPEAKER_0X'를 '발표자', '질의자 1', 'AI 수석비서관' 등 의미 있는 이름으로 변경해주세요.
3. 동일 인물로 판단되는 화자는 같은 이름으로 통일해야 합니다. (예: SPEAKER_05가 계속 질문하면 모두 '질의자 1'로 통일)
4. 최종 결과는 변경된 화자 이름이 적용된 전체 대화록 형식으로 출력해주세요.

---
[교정된 대화 내용]
{corrected_text}

---
[화자 역할이 적용된 최종 대화록]
'''


# ==============================================================================
# 요약 및 STT 프롬프트 (JSON 구조화)
# ==============================================================================

# --- 검색 친화적 요약 프롬프트 (JSON 출력) ---
MEETING_SUMMARY_SYSTEM_PROMPT = """당신은 회의록을 검색 친화적으로 구조화하는 요약 담당자입니다.
반드시 아래 JSON 스키마로 출력하세요. 원문에 없는 정보는 생성하지 말고 빈 값으로 두세요.
각 항목은 가능하면 원문 앵커(화자, 타임스탬프 start-end)를 포함하세요."""

MEETING_SUMMARY_USER_PROMPT = """[회의 정보]
- 주제: {topic}
- 키워드: {keywords}

[원문 대화(시간순)]
{text}

[출력 JSON 스키마]
{{
  "decisions": [
    {{
      "text": "결정 내용",
      "anchors": [{{"speaker": "이름/식별자", "start": 0.0, "end": 0.0}}]
    }}
  ],
  "action_items": [
    {{
      "assignee": "담당자",
      "task": "할 일",
      "due": "YYYY-MM-DD 또는 빈 문자열",
      "anchors": [{{"speaker": "이름/식별자", "start": 0.0, "end": 0.0}}]
    }}
  ],
  "key_points": [
    {{
      "topic": "소주제",
      "summary": "핵심 논의 요약",
      "speakers": ["이름1","이름2"],
      "anchors": [{{"speaker": "이름/식별자", "start": 0.0, "end": 0.0}}]
    }}
  ]
}}

[출력(JSON)]
"""

# --- Gemini 텍스트 요약 프롬프트 (JSON) ---
GEMINI_SUMMARY_PROMPT_TEMPLATE = f"""{MEETING_SUMMARY_SYSTEM_PROMPT}

{MEETING_SUMMARY_USER_PROMPT}"""


# --- GPT 텍스트 요약 프롬프트 (청크별) ---
GPT_CHUNK_SUMMARY_SYSTEM_PROMPT = "You are a helpful assistant that summarizes parts of a meeting transcript."
GPT_CHUNK_SUMMARY_USER_PROMPT = """다음은 '{topic}'에 관한 회의 대화의 일부입니다. 이 대화 내용을 바탕으로 핵심 내용을 간결하게 요약해 주십시오.
주요 키워드: {keywords}

대화 내용:
{chunk}

위 대화 내용의 핵심 요약:"""

# --- GPT 텍스트 요약 프롬프트 (최종 통합) ---
GPT_FINAL_SUMMARY_SYSTEM_PROMPT = "You are a helpful assistant that synthesizes multiple summaries into one final, coherent summary."
GPT_FINAL_SUMMARY_USER_PROMPT = """다음은 '{topic}'에 관한 회의의 각 부분에 대한 요약들입니다. 이 요약들을 바탕으로 전체 회의 내용을 포괄하는 하나의 최종 요약문을 자연스러운 문장으로 작성해 주십시오.

개별 요약 내용:
{combined_summary_text}

최종 통합 요약문:"""

# --- STT 프롬프트 템플릿 ---
STT_PROMPT_TEMPLATE = ""

# ==============================================================================
# 키워드 추출 프롬프트
# ==============================================================================

KEYWORD_EXTRACTION_PROMPT = """다음은 '{topic}'에 대한 회의록 전문입니다.
이 내용의 핵심을 가장 잘 나타내는 키워드를 5~7개 추출해주세요.
키워드는 쉼표(,)로 구분된 단일 문자열로 반환해주세요.

예: 펀드 조성, 민간 투자, 스케일업, 역직구, 재정 지원

회의록:
{text}

핵심 키워드:
"""
