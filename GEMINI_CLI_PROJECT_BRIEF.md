# Gemini-CLI 프로젝트 브리핑

> **목표**: 이 문서는 LLM 어시스턴트가 세션을 다시 시작할 때, 프로젝트의 전체 맥락을 빠르게 파악하고 작업을 원활하게 이어나갈 수 있도록 하기 위해 작성되었습니다.

---

## 1. 프로젝트 목표

- 기존에 개발된 AI 회의록 요약/Q&A 웹 애플리케이션 **'Minute Factory'**의 코드를 **리팩토링**하는 것을 목표로 한다.
- 최종 목표는 코드의 **테스트 용이성, 유지보수성, 확장성**을 대폭 향상시키는 것이다.

## 2. 기존 코드(`Minute` 폴더) 분석

- **주요 문제점**: 대부분의 로직이 소수의 파일에 강하게 결합되어 있어, 특정 기능 하나만 독립적으로 테스트하거나 수정하기가 매우 어려운 **모놀리식(Monolithic) 구조**이다.

## 3. 새로운 아키텍처(`Module` 폴더) 제안 (보류)

- **초기 아이디어**: 역할 기반의 **계층형 아키텍처(Layered Architecture)**를 `E:\github\Module` 폴더에 설계했었음.
- **문제점**: 구조가 너무 복잡하고 추상적이어서, 개발자가 각 파일의 역할을 직관적으로 파악하기 어려웠음. 이로 인해 '코드를 제어하고 있다'는 느낌을 받기 어려워, 작업 진행에 혼란이 발생함.

---

## 4. 새로운 리팩토링 전략: `minute_code_alpha` (2025-10-08)

> **방향 전환**: 복잡한 구조 대신, 개발자가 모든 단계를 완벽하게 이해하고 제어할 수 있는, 더 단순하고 점진적인 리팩토링 방식으로 전환하기로 합의함.

### 4.1. 핵심 원칙

1.  **하나의 파일, 하나의 기능**: 모든 코드 파일은 단 하나의 명확한 책임만 가진다.
2.  **점진적 분해 및 리팩토링**: 원본(`Minute`) 코드를 한 번에 하나씩 기능 단위로 분해하여 `minute_code_alpha` 폴더로 옮긴다. 옮겨진 코드 조각은 독립적으로 테스트한 후, 더 나은 코드로 점진적으로 개선한다.
3.  **상세한 문서화**: 모든 과정과 파일의 역할은 개발자(사용자)가 쉽게 이해할 수 있도록 상세히 문서화한다. (`README.md` 활용)

### 4.2. 현재까지의 진행 상황

1.  **`minute_code_alpha` 폴더 초기화 및 재구성**:
    -   기존 `minute_code_alpha` 폴더의 내용을 모두 삭제하고, 원본 `Minute` 프로젝트의 기능을 유지하면서 모듈별로 세분화된 구조로 재구성했습니다.
    -   각 파일 상단에는 중학생도 이해할 수 있는 쉬운 설명을 추가하여 코드 이해도를 높였습니다.

2.  **LLM 기능 분리 완료**:
    -   `llm/` 폴더 내에 `prompts.py`, `llm_clients.py`, `keywords.py`, `correct.py`, `summarize.py` 파일을 생성하여 LLM 관련 기능을 완벽하게 분리했습니다.

3.  **오디오 처리 기능 분리 완료**:
    -   `audio/` 폴더 내에 `diarization.py`, `stt.py` 파일을 생성하여 오디오 처리(화자 분리 및 STT) 기능을 분리했습니다.

4.  **설정 및 파일 관리 기능 분리 완료**:
    -   `settings.py` 파일을 생성하여 프로젝트의 일반 설정을 관리하고, `core/file_io.py` 파일을 생성하여 결과 파일 저장 기능을 분리했습니다.

5.  **메인 파이프라인 재구성 완료**:
    -   `pipelines/main_pipeline.py` 파일을 생성하여 전체 회의록 처리 과정을 총괄하는 '프로젝트 매니저' 역할을 재구성했습니다. 이제 이 파이프라인은 분리된 각 모듈들을 호출하여 작업을 수행합니다.

6.  **챗봇(Q&A) 기능 분리 완료**:
    -   `chatbot/` 폴더 내에 `prompts.py`, `vector_store.py`, `nodes.py`, `graph.py` 파일을 생성하여 챗봇(RAG) 기능을 모듈화했습니다.

7.  **UI(사용자 화면) 기능 분리 완료**:
    -   `ui/` 폴더 내에 `handlers.py`, `callbacks.py`, `layout.py` 파일을 생성하여 사용자 인터페이스 관련 기능을 분리했습니다.

8.  **최종 진입점 (`main.py`) 생성 완료**:
    -   `main.py` 파일을 생성하여 애플리케이션의 최종 실행 지점을 마련했습니다.

9.  **코드 검토 가이드 문서화**:
    -   `minute_code_alpha/CODE_REVIEW_GUIDE.md` 파일을 생성하여 재구성된 코드베이스를 효과적으로 검토할 수 있는 가이드를 제공했습니다.

### 4.3. 다음 작업 계획

모든 리팩토링 작업이 완료되었습니다. 이제 다음 단계는 다음과 같습니다.

1.  **기능 테스트**: 재구성된 코드베이스가 기존과 동일하게 작동하는지 확인하기 위한 통합 및 단위 테스트를 수행합니다.
2.  **성능 최적화**: 필요한 경우, 각 모듈의 성능을 검토하고 최적화 작업을 진행합니다.
3.  **추가 기능 개발 또는 개선**: 리팩토링된 구조를 기반으로 새로운 기능을 추가하거나 기존 기능을 개선합니다.
4.  **환경 설정**: `.env` 파일에 필요한 API 키를 설정하고, `requirements.txt`를 업데이트하여 모든 의존성 라이브러리를 설치합니다.

---

*이전 기록 (참고용)*

<details>
<summary>초기 아키텍처(Module)에서의 환경 문제 해결 과정</summary>

`scripts` 테스트 스크립트들을 실행하는 과정에서 여러 환경 관련 문제가 발생했으며, 아래와 같이 해결했다.

-   **`ModuleNotFoundError`**: `minute_code`의 하위 폴더들을 파이썬이 패키지로 인식하지 못하는 문제. 각 폴더에 빈 `__init__.py` 파일을 생성하여 해결.
-   **`ImportError` (상대 경로 문제)**: `python script.py` 방식으로 실행 시 발생하는 경로 문제. `python -m package.module` 방식으로 실행하도록 방식을 변경하고, 일부 임포트 구문을 절대 경로로 수정하여 해결.
-   **`ValueError` (Whisper 모델 인식 불가)**: 로컬(`E:\model`)에 저장된 모델의 설정 파일 문제로 추정. 모델 ID를 Hugging Face Hub의 `openai/whisper-base`로 변경하여, 라이브러리가 직접 모델을 다운로드하도록 수정.
-   **`RuntimeError` (torchcodec/FFmpeg 호환성)**: `torchcodec` 라이브러리가 FFmpeg 8.0 버전을 지원하지 않아 발생. **현재 이 문제를 해결하기 위해 FFmpeg 7.0 버전으로 다운그레이드하는 작업을 진행 중이다.**

</details>
